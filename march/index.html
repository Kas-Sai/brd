<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday! üéÇ</title>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --pink: #ff6eb4;
    --rose: #fb7185;
    --lavender: #c084fc;
    --gold: #fbbf24;
    --cream: #fff8f0;
    --dark: #1a0a1e;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--dark);
    font-family: 'Quicksand', sans-serif;
    overflow-x: hidden;
    cursor: none;
  }

  /* Custom Cursor */
  #cursor {
    position: fixed;
    width: 20px; height: 20px;
    border-radius: 50%;
    background: radial-gradient(circle, #ff6eb4, #c084fc);
    pointer-events: none;
    z-index: 9999;
    transform: translate(-50%, -50%);
    transition: transform 0.1s, width 0.2s, height 0.2s;
    mix-blend-mode: screen;
    box-shadow: 0 0 15px #ff6eb4, 0 0 30px #c084fc;
  }
  #cursor.big { width: 40px; height: 40px; }

  /* Canvas background */
  #three-canvas {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 0;
  }

  /* Main content overlay */
  #content {
    position: relative;
    z-index: 10;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding: 30px 20px 80px;
  }

  /* Hero */
  .hero {
    text-align: center;
    margin-bottom: 30px;
    animation: fadeUp 1.2s ease both;
  }

  .hero h1 {
    font-family: 'Great Vibes', cursive;
    font-size: clamp(3.5rem, 10vw, 7rem);
    background: linear-gradient(135deg, #fbbf24, #ff6eb4, #c084fc, #6ee7b7);
    background-size: 300% 300%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: shimmer 3s ease infinite, fadeUp 1s ease both;
    line-height: 1.1;
    text-shadow: none;
    filter: drop-shadow(0 0 20px rgba(255,110,180,0.6));
  }

  @keyframes shimmer {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }

  .hero .friend-name {
    font-family: 'Great Vibes', cursive;
    font-size: clamp(2rem, 6vw, 4rem);
    color: #fde68a;
    text-shadow: 0 0 30px rgba(251,191,36,0.7), 0 0 60px rgba(255,110,180,0.4);
    animation: fadeUp 1.4s ease both;
    margin-top: -10px;
  }

  .hero .tagline {
    margin-top: 10px;
    font-size: 1rem;
    color: rgba(255,200,230,0.8);
    font-weight: 600;
    letter-spacing: 3px;
    text-transform: uppercase;
    animation: fadeUp 1.6s ease both;
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(40px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  /* --- Floating 3D Orbs hint text --- */
  .hint {
    font-size: 0.85rem;
    color: rgba(255,180,220,0.6);
    text-align: center;
    margin-bottom: 20px;
    animation: pulse 2s ease infinite;
    letter-spacing: 1px;
  }
  @keyframes pulse {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 1; }
  }

  /* --- Message Card --- */
  .message-card {
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255,110,180,0.3);
    border-radius: 24px;
    padding: 32px 36px;
    max-width: 560px;
    width: 90%;
    margin-bottom: 28px;
    text-align: center;
    box-shadow: 0 0 40px rgba(192,132,252,0.2), inset 0 1px 0 rgba(255,255,255,0.1);
    animation: fadeUp 1.8s ease both;
    transition: box-shadow 0.3s, transform 0.3s;
  }
  .message-card:hover {
    box-shadow: 0 0 60px rgba(255,110,180,0.35), inset 0 1px 0 rgba(255,255,255,0.15);
    transform: translateY(-3px);
  }
  .message-card p {
    color: rgba(255,230,245,0.9);
    font-size: 1.05rem;
    line-height: 1.85;
    font-weight: 500;
  }
  .divider {
    margin: 16px auto;
    width: 80px;
    height: 2px;
    background: linear-gradient(to right, transparent, #ff6eb4, #c084fc, transparent);
    border-radius: 2px;
  }

  /* --- Wish Orbs (clickable) --- */
  .orbs-section {
    max-width: 560px;
    width: 90%;
    margin-bottom: 28px;
    animation: fadeUp 2s ease both;
  }
  .orbs-label {
    text-align: center;
    font-size: 0.8rem;
    color: rgba(255,180,220,0.7);
    letter-spacing: 3px;
    text-transform: uppercase;
    margin-bottom: 16px;
  }
  .orbs-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 14px;
  }
  .orb-btn {
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,110,180,0.25);
    border-radius: 18px;
    padding: 18px 10px;
    cursor: pointer;
    text-align: center;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    overflow: hidden;
  }
  .orb-btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at center, rgba(255,110,180,0.15), transparent 70%);
    opacity: 0;
    transition: opacity 0.3s;
  }
  .orb-btn:hover::before { opacity: 1; }
  .orb-btn:hover {
    transform: translateY(-6px) scale(1.06);
    border-color: rgba(255,110,180,0.6);
    box-shadow: 0 10px 30px rgba(255,110,180,0.25);
  }
  .orb-btn:active { transform: scale(0.95); }
  .orb-btn .icon { font-size: 1.8rem; display: block; margin-bottom: 6px; }
  .orb-btn .label { font-size: 0.72rem; color: rgba(255,210,240,0.8); font-weight: 700; letter-spacing: 0.5px; }

  /* --- Photo Button --- */
  .photo-btn {
    background: linear-gradient(135deg, rgba(255,110,180,0.2), rgba(192,132,252,0.2));
    border: 2px solid rgba(255,110,180,0.5);
    border-radius: 50px;
    padding: 16px 44px;
    color: #fff;
    font-family: 'Quicksand', sans-serif;
    font-size: 1.05rem;
    font-weight: 700;
    cursor: pointer;
    letter-spacing: 1px;
    transition: all 0.3s;
    box-shadow: 0 0 25px rgba(255,110,180,0.3);
    animation: fadeUp 2.2s ease both;
    margin-bottom: 28px;
    position: relative;
    overflow: hidden;
  }
  .photo-btn::before {
    content: '';
    position: absolute;
    top: -50%; left: -60%;
    width: 60%; height: 200%;
    background: rgba(255,255,255,0.15);
    transform: skewX(-20deg);
    transition: left 0.4s;
  }
  .photo-btn:hover::before { left: 120%; }
  .photo-btn:hover {
    background: linear-gradient(135deg, rgba(255,110,180,0.5), rgba(192,132,252,0.5));
    box-shadow: 0 0 50px rgba(255,110,180,0.5), 0 0 80px rgba(192,132,252,0.3);
    transform: scale(1.05);
  }

  /* --- Photo Modal --- */
  #photo-modal {
    display: none;
    position: fixed;
    inset: 0;
    z-index: 1000;
    background: rgba(10,0,20,0.85);
    backdrop-filter: blur(12px);
    align-items: center;
    justify-content: center;
  }
  #photo-modal.show { display: flex; animation: modalIn 0.4s ease both; }
  @keyframes modalIn {
    from { opacity: 0; }
    to   { opacity: 1; }
  }
  .modal-inner {
    background: rgba(30,10,40,0.9);
    border: 1px solid rgba(255,110,180,0.4);
    border-radius: 28px;
    padding: 36px 32px;
    max-width: 420px;
    width: 88%;
    text-align: center;
    box-shadow: 0 0 80px rgba(255,110,180,0.3), 0 0 160px rgba(192,132,252,0.15);
    animation: popBounce 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) both;
    position: relative;
  }
  @keyframes popBounce {
    from { opacity: 0; transform: scale(0.6) translateY(40px); }
    to   { opacity: 1; transform: scale(1) translateY(0); }
  }

  .modal-close {
    position: absolute;
    top: 14px; right: 18px;
    background: none;
    border: none;
    color: rgba(255,180,220,0.7);
    font-size: 1.4rem;
    cursor: pointer;
    transition: color 0.2s, transform 0.2s;
  }
  .modal-close:hover { color: #ff6eb4; transform: rotate(90deg) scale(1.2); }

  .photo-frame {
    width: 200px; height: 200px;
    border-radius: 50%;
    margin: 0 auto 20px;
    border: 3px solid transparent;
    background: linear-gradient(#1a0a2e, #1a0a2e) padding-box,
                linear-gradient(135deg, #ff6eb4, #fbbf24, #c084fc) border-box;
    box-shadow: 0 0 30px rgba(255,110,180,0.5), 0 0 60px rgba(192,132,252,0.2);
    overflow: hidden;
    position: relative;
    animation: rotateGlow 4s linear infinite;
  }
  @keyframes rotateGlow {
    0%, 100% { box-shadow: 0 0 30px rgba(255,110,180,0.6), 0 0 60px rgba(192,132,252,0.2); }
    33% { box-shadow: 0 0 30px rgba(251,191,36,0.6), 0 0 60px rgba(255,110,180,0.2); }
    66% { box-shadow: 0 0 30px rgba(192,132,252,0.6), 0 0 60px rgba(251,191,36,0.2); }
  }
  .photo-frame img {
    width: 100%; height: 100%;
    object-fit: cover;
    transition: transform 0.5s;
  }
  .photo-frame:hover img { transform: scale(1.08); }

  /* Placeholder photo (cute default) */
  .photo-placeholder {
    width: 100%; height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, rgba(255,110,180,0.2), rgba(192,132,252,0.2));
    gap: 8px;
  }
  .photo-placeholder span { font-size: 4rem; }
  .photo-placeholder p { font-size: 0.8rem; color: rgba(255,200,230,0.6); }

  .modal-title {
    font-family: 'Great Vibes', cursive;
    font-size: 2.4rem;
    color: #fde68a;
    text-shadow: 0 0 20px rgba(251,191,36,0.6);
    margin-bottom: 8px;
  }
  .modal-msg {
    color: rgba(255,220,240,0.8);
    font-size: 0.92rem;
    line-height: 1.7;
    margin-bottom: 18px;
  }

  /* Photo upload hint */
  .upload-hint {
    font-size: 0.75rem;
    color: rgba(255,180,220,0.5);
    margin-top: 10px;
    cursor: pointer;
    transition: color 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
  }
  .upload-hint:hover { color: rgba(255,110,180,0.9); }

  #photo-upload { display: none; }

  /* Heart rain triggered by wishes */
  .heart-rain {
    position: fixed;
    pointer-events: none;
    z-index: 500;
    font-size: 1.5rem;
    animation: heartFall 2s ease-in forwards;
    top: -40px;
  }
  @keyframes heartFall {
    0%   { transform: translateY(0) rotate(0deg) scale(1); opacity: 1; }
    100% { transform: translateY(110vh) rotate(360deg) scale(0.5); opacity: 0; }
  }

  /* Wish popup */
  .wish-popup {
    position: fixed;
    z-index: 600;
    background: rgba(30,10,40,0.92);
    border: 1px solid rgba(255,110,180,0.4);
    border-radius: 16px;
    padding: 14px 20px;
    color: rgba(255,220,240,0.95);
    font-size: 0.95rem;
    font-weight: 600;
    pointer-events: none;
    animation: wishPopup 2.5s ease forwards;
    backdrop-filter: blur(10px);
    box-shadow: 0 0 25px rgba(255,110,180,0.3);
    max-width: 200px;
    text-align: center;
  }
  @keyframes wishPopup {
    0%   { opacity: 0; transform: scale(0.6) translateY(10px); }
    15%  { opacity: 1; transform: scale(1) translateY(0); }
    75%  { opacity: 1; transform: scale(1) translateY(-20px); }
    100% { opacity: 0; transform: scale(0.8) translateY(-40px); }
  }

  /* Sparkle burst on click */
  .sparkle-burst {
    position: fixed;
    pointer-events: none;
    z-index: 501;
    width: 6px; height: 6px;
    border-radius: 50%;
    animation: burstOut 0.8s ease-out forwards;
  }
  @keyframes burstOut {
    0%   { transform: translate(0,0) scale(1); opacity: 1; }
    100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
  }

  /* Footer */
  .footer {
    color: rgba(255,180,220,0.4);
    font-size: 0.78rem;
    text-align: center;
    margin-top: 10px;
    animation: fadeUp 2.5s ease both;
    letter-spacing: 1px;
  }

  @media (max-width: 440px) {
    .orbs-grid { grid-template-columns: repeat(2, 1fr); }
    .photo-btn { padding: 14px 30px; }
  }
</style>
</head>
<body>

<!-- Custom cursor -->
<div id="cursor"></div>

<!-- Three.js canvas -->
<canvas id="three-canvas"></canvas>

<!-- Photo modal -->
<div id="photo-modal">
  <div class="modal-inner">
    <button class="modal-close" onclick="closeModal()">‚úï</button>
    <div class="photo-frame" id="photo-frame">
      
      <img src="https://github.com/Kas-Sai/brd/blob/main/march/jiaxin.jpeg?raw=true" alt="Friend" >
    </div>
    <div class="modal-title">She's Magical ‚ú®</div>
    <p class="modal-msg">
      Here's to the most wonderful, gorgeous soul ‚Äî the one who makes every moment brighter just by being in it. üíñ
    </p>
    <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
      <span style="font-size:1.5rem;animation:bounce2 1s ease infinite">üåπ</span>
      <span style="font-size:1.5rem;animation:bounce2 1.2s ease infinite 0.2s">‚ú®</span>
      <span style="font-size:1.5rem;animation:bounce2 1s ease infinite 0.4s">üí´</span>
      <span style="font-size:1.5rem;animation:bounce2 1.2s ease infinite 0.1s">üå∏</span>
      <span style="font-size:1.5rem;animation:bounce2 1s ease infinite 0.3s">üíù</span>
    </div>
    <!-- <label class="upload-hint" for="photo-upload">
      üì∑ Click to upload her photo
    </label> -->
    <input type="file" id="photo-upload" accept="image/*">
  </div>
</div>

<!-- Main content -->
<div id="content">
  <div class="hero">
    <h1>Happy Birthday</h1>
    <div class="friend-name">Dear Jiaxin üéÇ</div>
    <div class="tagline">‚ú® Its your day Dear Jiaxin ‚ú®</div>
  </div>


  <div class="message-card">
    <p>On this luminous day, the universe celebrates you, the rarest of souls, overflowing with warmth, laughter, and boundless love. üåô</p>
    <div class="divider"></div>
    <p>May every dream you hold close bloom into something even more beautiful than you imagined. You deserve all the stars in the sky, <b>My Precious Friend</b>. üåü</p>
  </div>
 <!-- Background Music -->
<audio id="bg-music" autoplay loop>
  <source src="brdsong.mp3" type="audio/mpeg">
</audio>

  <div class="orbs-section">
    <div class="orbs-label">‚ú¶ Click each wish for you ‚ú¶</div>
    <div class="orbs-grid">
      <div class="orb-btn" onclick="triggerWish(this, 'üíñ Infinite Love & Joy!', 'heart')">
        <span class="icon">üíñ</span>
        <span class="label">Love</span>
      </div>
      <div class="orb-btn" onclick="triggerWish(this, 'üåà Endless Happiness!', 'star')">
        <span class="icon">üåà</span>
        <span class="label">Joy</span>
      </div>
      <div class="orb-btn" onclick="triggerWish(this, '‚≠ê All Dreams Come True!', 'sparkle')">
        <span class="icon">‚≠ê</span>
        <span class="label">Dreams</span>
      </div>
      <div class="orb-btn" onclick="triggerWish(this, 'üçÄ Forever Lucky!', 'leaf')">
        <span class="icon">üçÄ</span>
        <span class="label">Luck</span>
      </div>
      <div class="orb-btn" onclick="triggerWish(this, 'üå∏ Blooming Beauty!', 'flower')">
        <span class="icon">üå∏</span>
        <span class="label">Beauty</span>
      </div>
      <div class="orb-btn" onclick="triggerWish(this, '‚úàÔ∏è Amazing Adventures!', 'star')">
        <span class="icon">‚úàÔ∏è</span>
        <span class="label">Adventures</span>
      </div>
      <div class="orb-btn" onclick="triggerWish(this, 'üí´ Pure Magic Ahead!', 'sparkle')">
        <span class="icon">üí´</span>
        <span class="label">Magic</span>
      </div>
      <div class="orb-btn" onclick="triggerWish(this, 'üéµ Sweet Harmony!', 'heart')">
        <span class="icon">üéµ</span>
        <span class="label">Harmony</span>
      </div>
    </div>
  </div>

  <button class="photo-btn" onclick="openModal()">
    üå∏ ÁúãÁúãËøô‰ΩçÁæé‰∏ΩÁöÑÁîüÊó•Â•≥Â≠© üå∏
  </button>

  <div class="footer">Made with üíñ just for you ¬∑ Your Special Day</div>
</div>

<style>
@keyframes bounce2 {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}
</style>

<!-- THREE.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
// =============================================
// THREE.JS SCENE SETUP
// =============================================
const canvas = document.getElementById('three-canvas');
const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setClearColor(0x0d0015, 1);

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 200);
camera.position.set(0, 0, 30);

window.addEventListener('resize', () => {
  renderer.setSize(window.innerWidth, window.innerHeight);
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
});

// --- AMBIENT + POINT LIGHTS ---
const ambient = new THREE.AmbientLight(0x330011, 2);
scene.add(ambient);

const lights = [
  { color: 0xff6eb4, pos: [15, 10, 5] },
  { color: 0xc084fc, pos: [-15, -8, 3] },
  { color: 0xfbbf24, pos: [0, 15, 8] },
  { color: 0x6ee7b7, pos: [10, -15, 5] },
];
lights.forEach(l => {
  const pl = new THREE.PointLight(l.color, 1.5, 60);
  pl.position.set(...l.pos);
  scene.add(pl);
});

// --- STAR FIELD ---
const starGeo = new THREE.BufferGeometry();
const starCount = 1200;
const starPos = new Float32Array(starCount * 3);
const starColors = new Float32Array(starCount * 3);
const starPalette = [
  [1.0, 0.43, 0.71], // pink
  [0.75, 0.52, 0.99], // lavender
  [0.98, 0.75, 0.14], // gold
  [0.43, 0.91, 0.72], // mint
  [1.0, 0.85, 0.85],  // white-pink
];
for (let i = 0; i < starCount; i++) {
  starPos[i*3]   = (Math.random()-0.5) * 150;
  starPos[i*3+1] = (Math.random()-0.5) * 150;
  starPos[i*3+2] = (Math.random()-0.5) * 60 - 20;
  const c = starPalette[Math.floor(Math.random()*starPalette.length)];
  starColors[i*3] = c[0]; starColors[i*3+1] = c[1]; starColors[i*3+2] = c[2];
}
starGeo.setAttribute('position', new THREE.BufferAttribute(starPos, 3));
starGeo.setAttribute('color', new THREE.BufferAttribute(starColors, 3));
const starMat = new THREE.PointsMaterial({ size: 0.18, vertexColors: true, transparent: true, opacity: 0.9, sizeAttenuation: true });
const stars = new THREE.Points(starGeo, starMat);
scene.add(stars);

// --- FLOATING HEART PARTICLES ---
const heartCount = 80;
const heartMeshes = [];
function createHeart2D() {
  const shape = new THREE.Shape();
  const x = 0, y = 0;
  shape.moveTo(x, y + 0.5);
  shape.bezierCurveTo(x, y + 0.5, x - 0.5, y, x - 0.5, y - 0.25);
  shape.bezierCurveTo(x - 0.5, y - 0.6, x, y - 0.9, x, y - 1);
  shape.bezierCurveTo(x, y - 0.9, x + 0.5, y - 0.6, x + 0.5, y - 0.25);
  shape.bezierCurveTo(x + 0.5, y, x, y + 0.5, x, y + 0.5);
  return shape;
}
const heartShape = createHeart2D();
const heartGeo = new THREE.ShapeGeometry(heartShape);
const heartColors3D = [0xff6eb4, 0xfb7185, 0xfbbf24, 0xc084fc, 0xf9a8d4];

for (let i = 0; i < heartCount; i++) {
  const mat = new THREE.MeshBasicMaterial({
    color: heartColors3D[Math.floor(Math.random()*heartColors3D.length)],
    transparent: true,
    opacity: Math.random()*0.5+0.2,
    side: THREE.DoubleSide,
  });
  const mesh = new THREE.Mesh(heartGeo, mat);
  mesh.position.set(
    (Math.random()-0.5)*60,
    (Math.random()-0.5)*50,
    (Math.random()-0.5)*20 - 5
  );
  const s = Math.random()*0.4+0.15;
  mesh.scale.set(s,s,s);
  mesh.userData = {
    speed: Math.random()*0.003+0.001,
    rotSpeed: (Math.random()-0.5)*0.02,
    floatAmp: Math.random()*2+0.5,
    floatFreq: Math.random()*0.5+0.3,
    baseY: mesh.position.y,
    phase: Math.random()*Math.PI*2,
  };
  scene.add(mesh);
  heartMeshes.push(mesh);
}

// --- FLOATING SPARKLE ORBS ---
const orbCount = 30;
const orbMeshes = [];
for (let i = 0; i < orbCount; i++) {
  const geo = new THREE.SphereGeometry(Math.random()*0.4+0.1, 8, 8);
  const mat = new THREE.MeshStandardMaterial({
    color: heartColors3D[Math.floor(Math.random()*heartColors3D.length)],
    emissive: heartColors3D[Math.floor(Math.random()*heartColors3D.length)],
    emissiveIntensity: 1.5,
    transparent: true,
    opacity: Math.random()*0.6+0.2,
  });
  const mesh = new THREE.Mesh(geo, mat);
  mesh.position.set(
    (Math.random()-0.5)*50,
    (Math.random()-0.5)*40,
    (Math.random()-0.5)*15 - 8
  );
  mesh.userData = {
    speed: Math.random()*0.004+0.001,
    floatAmp: Math.random()*3+1,
    floatFreq: Math.random()*0.4+0.2,
    baseY: mesh.position.y,
    phase: Math.random()*Math.PI*2,
    pulseSpeed: Math.random()*0.05+0.02,
  };
  scene.add(mesh);
  orbMeshes.push(mesh);
}

// --- ROTATING RING ---
const ringGeo = new THREE.TorusGeometry(12, 0.08, 8, 100);
const ringMat = new THREE.MeshBasicMaterial({ color: 0xff6eb4, transparent: true, opacity: 0.15 });
const ring1 = new THREE.Mesh(ringGeo, ringMat);
ring1.rotation.x = Math.PI / 2.5;
scene.add(ring1);

const ring2 = new THREE.Mesh(
  new THREE.TorusGeometry(18, 0.05, 8, 100),
  new THREE.MeshBasicMaterial({ color: 0xc084fc, transparent: true, opacity: 0.1 })
);
ring2.rotation.x = Math.PI / 3;
ring2.rotation.z = Math.PI / 6;
scene.add(ring2);

// --- CLICK BURST PARTICLES ---
const burstParticles = [];
function createBurst3D(x, y) {
  // Convert screen to world
  const vec = new THREE.Vector3(
    (x / window.innerWidth) * 2 - 1,
    -(y / window.innerHeight) * 2 + 1,
    0.5
  );
  vec.unproject(camera);
  vec.sub(camera.position).normalize();
  const dist = 25;
  const pos = camera.position.clone().addScaledVector(vec, dist);

  for (let i = 0; i < 18; i++) {
    const geo = new THREE.SphereGeometry(0.12, 6, 6);
    const mat = new THREE.MeshBasicMaterial({
      color: heartColors3D[Math.floor(Math.random()*heartColors3D.length)],
      transparent: true,
    });
    const m = new THREE.Mesh(geo, mat);
    m.position.copy(pos);
    const vel = new THREE.Vector3(
      (Math.random()-0.5)*0.6,
      (Math.random()-0.5)*0.6,
      (Math.random()-0.5)*0.3
    );
    m.userData = { vel, life: 1 };
    scene.add(m);
    burstParticles.push(m);
  }
}

// Mouse tracking for camera parallax
let mouseX = 0, mouseY = 0;
document.addEventListener('mousemove', e => {
  mouseX = (e.clientX / window.innerWidth - 0.5) * 2;
  mouseY = -(e.clientY / window.innerHeight - 0.5) * 2;

  // cursor
  cursor.style.left = e.clientX + 'px';
  cursor.style.top = e.clientY + 'px';
});

// Click to create burst
document.getElementById('three-canvas').addEventListener('click', e => {
  createBurst3D(e.clientX, e.clientY);
  spawnCSS2DHearts(e.clientX, e.clientY);
});

// --- ANIMATION LOOP ---
let time = 0;
function animate() {
  requestAnimationFrame(animate);
  time += 0.016;

  // Camera gentle parallax
  camera.position.x += (mouseX * 2 - camera.position.x) * 0.03;
  camera.position.y += (mouseY * 1.5 - camera.position.y) * 0.03;
  camera.lookAt(0, 0, 0);

  // Rotate star field
  stars.rotation.y += 0.0003;
  stars.rotation.x += 0.0001;

  // Animate hearts
  heartMeshes.forEach(h => {
    h.position.y = h.userData.baseY + Math.sin(time * h.userData.floatFreq + h.userData.phase) * h.userData.floatAmp;
    h.rotation.z += h.userData.rotSpeed;
    h.position.x += h.userData.speed;
    if (h.position.x > 35) h.position.x = -35;
  });

  // Animate orbs
  orbMeshes.forEach(o => {
    o.position.y = o.userData.baseY + Math.sin(time * o.userData.floatFreq + o.userData.phase) * o.userData.floatAmp;
    o.position.x += o.userData.speed;
    if (o.position.x > 30) o.position.x = -30;
    o.material.emissiveIntensity = 1.2 + Math.sin(time * o.userData.pulseSpeed * 10) * 0.8;
  });

  // Animate rings
  ring1.rotation.z += 0.003;
  ring2.rotation.y += 0.002;

  // Burst particles
  for (let i = burstParticles.length - 1; i >= 0; i--) {
    const p = burstParticles[i];
    p.userData.vel.y -= 0.01; // gravity
    p.position.add(p.userData.vel);
    p.userData.life -= 0.025;
    p.material.opacity = p.userData.life;
    if (p.userData.life <= 0) {
      scene.remove(p);
      burstParticles.splice(i, 1);
    }
  }

  renderer.render(scene, camera);
}
animate();

// =============================================
// CSS HEARTS ON CLICK
// =============================================
const heartEmojis = ['üíñ','üíù','üíó','üå∏','‚ú®','üí´','‚≠ê','üåü'];
function spawnCSS2DHearts(x, y) {
  for (let i = 0; i < 8; i++) {
    const h = document.createElement('div');
    h.className = 'heart-rain';
    h.style.left = (x + (Math.random()-0.5)*80) + 'px';
    h.style.top = y + 'px';
    h.textContent = heartEmojis[Math.floor(Math.random()*heartEmojis.length)];
    h.style.fontSize = (1 + Math.random()*1.2) + 'rem';
    h.style.animationDuration = (1.5 + Math.random()) + 's';
    h.style.animationDelay = Math.random()*0.3 + 's';
    document.body.appendChild(h);
    setTimeout(() => h.remove(), 3000);
  }
}

// =============================================
// WISH BUTTON INTERACTIONS
// =============================================
const wishMessages = {
  'üíñ Infinite Love & Joy!': ['You are so loved! üíñ', 'Love surrounds you! ü•∞'],
  'üåà Endless Happiness!': ['Smile always! üåà', 'Joy fills your heart! ‚ú®'],
  '‚≠ê All Dreams Come True!': ['Reach the stars! ‚≠ê', 'Dream big! üí´'],
  'üçÄ Forever Lucky!': ['Luck is yours! üçÄ', 'Fortune smiles on you! üåü'],
  'üå∏ Blooming Beauty!': ['You are gorgeous! üå∏', 'Radiant soul! üíê'],
  '‚úàÔ∏è Amazing Adventures!': ['Go explore! ‚úàÔ∏è', 'Adventure awaits! üó∫Ô∏è'],
  'üí´ Pure Magic Ahead!': ['Magic is real for you! üí´', 'Enchanted life! ü™Ñ'],
  'üéµ Sweet Harmony!': ['Music in your heart! üéµ', 'Harmony always! üé∂'],
};

function triggerWish(btn, msg, type) {
  const rect = btn.getBoundingClientRect();
  const cx = rect.left + rect.width/2;
  const cy = rect.top + rect.height/2;

  // Sparkle burst (CSS)
  const colors = ['#ff6eb4','#c084fc','#fbbf24','#6ee7b7','#fb7185'];
  for (let i = 0; i < 14; i++) {
    const s = document.createElement('div');
    s.className = 'sparkle-burst';
    s.style.left = cx + 'px';
    s.style.top = cy + 'px';
    s.style.background = colors[Math.floor(Math.random()*colors.length)];
    const angle = (i / 14) * Math.PI * 2 + Math.random()*0.4;
    const dist = 40 + Math.random() * 60;
    s.style.setProperty('--tx', Math.cos(angle)*dist + 'px');
    s.style.setProperty('--ty', Math.sin(angle)*dist + 'px');
    s.style.animationDuration = (0.5 + Math.random()*0.4) + 's';
    s.style.width = s.style.height = (4 + Math.random()*6) + 'px';
    document.body.appendChild(s);
    setTimeout(() => s.remove(), 1000);
  }

  // Wish popup
  const popup = document.createElement('div');
  popup.className = 'wish-popup';
  popup.textContent = msg;
  popup.style.left = Math.min(cx - 100, window.innerWidth - 220) + 'px';
  popup.style.top = (cy - 70) + 'px';
  document.body.appendChild(popup);
  setTimeout(() => popup.remove(), 2500);

  // Rain emojis from this button
  spawnCSS2DHearts(cx, cy);

  // Also create 3D burst
  createBurst3D(cx, cy);
}

// =============================================
// PHOTO MODAL
// =============================================
const modal = document.getElementById('photo-modal');
function openModal() {
  modal.classList.add('show');
  spawnCSS2DHearts(window.innerWidth/2, window.innerHeight/2);
}
function closeModal() {
  modal.classList.remove('show');
}
modal.addEventListener('click', e => {
  if (e.target === modal) closeModal();
});

// Photo upload


// =============================================
// CUSTOM CURSOR
// =============================================
const cursor = document.getElementById('cursor');
document.querySelectorAll('button, .orb-btn, label').forEach(el => {
  el.addEventListener('mouseenter', () => cursor.classList.add('big'));
  el.addEventListener('mouseleave', () => cursor.classList.remove('big'));
});

// =============================================
// AUTO CONFETTI ON LOAD
// =============================================
window.addEventListener('load', () => {
  setTimeout(() => {
    for (let i = 0; i < 5; i++) {
      setTimeout(() => spawnCSS2DHearts(Math.random()*window.innerWidth, 0), i*200);
    }
  }, 1000);
});
</script>
</body>

</html>
